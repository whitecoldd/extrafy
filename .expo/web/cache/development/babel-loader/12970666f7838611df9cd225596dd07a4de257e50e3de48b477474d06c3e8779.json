{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar Feed = function Feed(props) {\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    posts = _useState2[0],\n    setPosts = _useState2[1];\n  useEffect(function () {\n    var posts = [];\n    if (props.usersLoaded === props.follows.length) {\n      var _loop = function _loop(i) {\n        var user = props.users.find(function (a) {\n          return a.uid === props.follows[i];\n        });\n        if (user != undefined) {\n          posts = [].concat(_toConsumableArray(posts), _toConsumableArray(user.posts));\n        }\n      };\n      for (var i = 0; i < props.follows.length; i++) {\n        _loop(i);\n      }\n      posts.sort(function (x, y) {\n        return x.created_at - y.created_at;\n      });\n      setPosts(posts);\n    }\n  }, [props.usersLoaded]);\n  return _jsx(View, {\n    style: styles.container,\n    children: _jsx(View, {\n      style: styles.gallery,\n      children: _jsx(FlatList, {\n        numColumns: 1,\n        horizontal: false,\n        data: posts,\n        renderItem: function renderItem(_ref) {\n          var item = _ref.item;\n          return _jsxs(View, {\n            style: styles.imgContainer,\n            children: [_jsx(Text, {\n              style: styles.container,\n              children: item.user.username\n            }), _jsx(Image, {\n              style: styles.image,\n              source: {\n                uri: item.downloadURL\n              }\n            })]\n          });\n        }\n      })\n    })\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    marginTop: 40\n  },\n  info: {\n    margin: 10\n  },\n  gallery: {\n    flex: 1\n  },\n  image: {\n    flex: 1,\n    aspectRatio: 3 / 2\n  },\n  imgContainer: {\n    flex: 1\n  }\n});\nvar mapStateToProps = function mapStateToProps(store) {\n  return {\n    currentUser: store.userState.currentUser,\n    follows: store.userState.follows,\n    users: store.usersState.users,\n    usersLoaded: store.usersState.usersLoaded\n  };\n};\nexport default connect(mapStateToProps, null)(Feed);","map":{"version":3,"names":["React","useEffect","useState","connect","jsx","_jsx","jsxs","_jsxs","Feed","props","_useState","_useState2","_slicedToArray","posts","setPosts","usersLoaded","follows","length","_loop","i","user","users","find","a","uid","undefined","concat","_toConsumableArray","sort","x","y","created_at","View","style","styles","container","children","gallery","FlatList","numColumns","horizontal","data","renderItem","_ref","item","imgContainer","Text","username","Image","image","source","uri","downloadURL","StyleSheet","create","flex","marginTop","info","margin","aspectRatio","mapStateToProps","store","currentUser","userState","usersState"],"sources":["D:/prog/TFT/extrafy/components/main/Feed.js"],"sourcesContent":["import { View, Text, Image, FlatList, StyleSheet, Button } from \"react-native\";\r\nimport React, { useEffect, useState } from \"react\";\r\n\r\nimport { connect } from \"react-redux\";\r\n\r\nconst Feed = (props) => {\r\n  const [posts, setPosts] = useState([]);\r\n  useEffect(() => {\r\n    let posts = [];\r\n    if (props.usersLoaded === props.follows.length) {\r\n      for (let i = 0; i < props.follows.length; i++) {\r\n        const user = props.users.find((a) => a.uid === props.follows[i]);\r\n        if (user != undefined) {\r\n          posts = [...posts, ...user.posts];\r\n        }\r\n      }\r\n      posts.sort(function (x, y) {\r\n        return x.created_at - y.created_at;\r\n      });\r\n\r\n      setPosts(posts);\r\n    }\r\n  }, [props.usersLoaded]);\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <View style={styles.gallery}>\r\n        <FlatList\r\n          numColumns={1}\r\n          horizontal={false}\r\n          data={posts}\r\n          renderItem={({ item }) => (\r\n            <View style={styles.imgContainer}>\r\n              <Text style={styles.container}>{item.user.username}</Text>\r\n              <Image style={styles.image} source={{ uri: item.downloadURL }} />\r\n            </View>\r\n          )}\r\n        />\r\n      </View>\r\n    </View>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    marginTop: 40,\r\n  },\r\n  info: {\r\n    margin: 10,\r\n  },\r\n  gallery: { flex: 1 },\r\n  image: {\r\n    flex: 1,\r\n    aspectRatio: 3 / 2,\r\n  },\r\n  imgContainer: {\r\n    flex: 1,\r\n  },\r\n});\r\n\r\nconst mapStateToProps = (store) => ({\r\n  currentUser: store.userState.currentUser,\r\n  follows: store.userState.follows,\r\n  users: store.usersState.users,\r\n  usersLoaded: store.usersState.usersLoaded,\r\n});\r\nexport default connect(mapStateToProps, null)(Feed);\r\n"],"mappings":";;;;;;;;AACA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAElD,SAASC,OAAO,QAAQ,aAAa;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AAEtC,IAAMC,IAAI,GAAG,SAAPA,IAAIA,CAAIC,KAAK,EAAK;EACtB,IAAAC,SAAA,GAA0BR,QAAQ,CAAC,EAAE,CAAC;IAAAS,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAA/BG,KAAK,GAAAF,UAAA;IAAEG,QAAQ,GAAAH,UAAA;EACtBV,SAAS,CAAC,YAAM;IACd,IAAIY,KAAK,GAAG,EAAE;IACd,IAAIJ,KAAK,CAACM,WAAW,KAAKN,KAAK,CAACO,OAAO,CAACC,MAAM,EAAE;MAAA,IAAAC,KAAA,YAAAA,MAAAC,CAAA,EACC;QAC7C,IAAMC,IAAI,GAAGX,KAAK,CAACY,KAAK,CAACC,IAAI,CAAC,UAACC,CAAC;UAAA,OAAKA,CAAC,CAACC,GAAG,KAAKf,KAAK,CAACO,OAAO,CAACG,CAAC,CAAC;QAAA,EAAC;QAChE,IAAIC,IAAI,IAAIK,SAAS,EAAE;UACrBZ,KAAK,MAAAa,MAAA,CAAAC,kBAAA,CAAOd,KAAK,GAAAc,kBAAA,CAAKP,IAAI,CAACP,KAAK,EAAC;QACnC;MACF,CAAC;MALD,KAAK,IAAIM,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGV,KAAK,CAACO,OAAO,CAACC,MAAM,EAAEE,CAAC,EAAE;QAAAD,KAAA,CAAAC,CAAA;MAAA;MAM7CN,KAAK,CAACe,IAAI,CAAC,UAAUC,CAAC,EAAEC,CAAC,EAAE;QACzB,OAAOD,CAAC,CAACE,UAAU,GAAGD,CAAC,CAACC,UAAU;MACpC,CAAC,CAAC;MAEFjB,QAAQ,CAACD,KAAK,CAAC;IACjB;EACF,CAAC,EAAE,CAACJ,KAAK,CAACM,WAAW,CAAC,CAAC;EAEvB,OACEV,IAAA,CAAC2B,IAAI;IAACC,KAAK,EAAEC,MAAM,CAACC,SAAU;IAAAC,QAAA,EAC5B/B,IAAA,CAAC2B,IAAI;MAACC,KAAK,EAAEC,MAAM,CAACG,OAAQ;MAAAD,QAAA,EAC1B/B,IAAA,CAACiC,QAAQ;QACPC,UAAU,EAAE,CAAE;QACdC,UAAU,EAAE,KAAM;QAClBC,IAAI,EAAE5B,KAAM;QACZ6B,UAAU,EAAE,SAAAA,WAAAC,IAAA;UAAA,IAAGC,IAAI,GAAAD,IAAA,CAAJC,IAAI;UAAA,OACjBrC,KAAA,CAACyB,IAAI;YAACC,KAAK,EAAEC,MAAM,CAACW,YAAa;YAAAT,QAAA,GAC/B/B,IAAA,CAACyC,IAAI;cAACb,KAAK,EAAEC,MAAM,CAACC,SAAU;cAAAC,QAAA,EAAEQ,IAAI,CAACxB,IAAI,CAAC2B;YAAQ,EAAQ,EAC1D1C,IAAA,CAAC2C,KAAK;cAACf,KAAK,EAAEC,MAAM,CAACe,KAAM;cAACC,MAAM,EAAE;gBAAEC,GAAG,EAAEP,IAAI,CAACQ;cAAY;YAAE,EAAG;UAAA,EAC5D;QAAA;MACP;IACF;EACG,EACF;AAEX,CAAC;AAED,IAAMlB,MAAM,GAAGmB,UAAU,CAACC,MAAM,CAAC;EAC/BnB,SAAS,EAAE;IACToB,IAAI,EAAE,CAAC;IACPC,SAAS,EAAE;EACb,CAAC;EACDC,IAAI,EAAE;IACJC,MAAM,EAAE;EACV,CAAC;EACDrB,OAAO,EAAE;IAAEkB,IAAI,EAAE;EAAE,CAAC;EACpBN,KAAK,EAAE;IACLM,IAAI,EAAE,CAAC;IACPI,WAAW,EAAE,CAAC,GAAG;EACnB,CAAC;EACDd,YAAY,EAAE;IACZU,IAAI,EAAE;EACR;AACF,CAAC,CAAC;AAEF,IAAMK,eAAe,GAAG,SAAlBA,eAAeA,CAAIC,KAAK;EAAA,OAAM;IAClCC,WAAW,EAAED,KAAK,CAACE,SAAS,CAACD,WAAW;IACxC9C,OAAO,EAAE6C,KAAK,CAACE,SAAS,CAAC/C,OAAO;IAChCK,KAAK,EAAEwC,KAAK,CAACG,UAAU,CAAC3C,KAAK;IAC7BN,WAAW,EAAE8C,KAAK,CAACG,UAAU,CAACjD;EAChC,CAAC;AAAA,CAAC;AACF,eAAeZ,OAAO,CAACyD,eAAe,EAAE,IAAI,CAAC,CAACpD,IAAI,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}